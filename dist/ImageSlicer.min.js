!function(a){"use strict";var b=a.module("net.enzey.image-splicer",[]);b.service("PrimaryImage",function(){var a=null;return{get:function(){return a},set:function(b){a=b}}}),b.directive("spinner",function(a,b){return{scope:{},compile:function(){this.name;return{pre:function(c,d,e){var f=b(e.ngModel);c.decrease=function(a){var b=1;a.ctrlKey&&(b=5),a.shiftKey&&(b=10),f.assign(c.$parent,f(c.$parent)-b)},c.increase=function(a){var b=1;a.ctrlKey&&(b=5),a.shiftKey&&(b=10),f.assign(c.$parent,f(c.$parent)+b)},d.append(a('<button ng-click="decrease($event)">&#9664;</button>')(c)),d.append(a("<span>{{$parent."+e.ngModel+"}}</span>")(c)),d.append(a('<button ng-click="increase($event)">&#9654;</button>')(c))},post:function(){}}}}}),b.directive("fileSelector",function(a){return{compile:function(){this.name;return{pre:function(b,c,d){c.bind("change",function(c){var e=c.target.files[0];a(d.ngModel).assign(b,e),b.$apply()})},post:function(){}}}}}),b.directive("canvasManager",function(b,c){return{restrict:"AE",compile:function(b,d){var e,f,g=(this.name,b[0].getContext("2d")),h=function(a){b[0].setAttribute("width",a.width),b[0].setAttribute("height",a.height),g.drawImage(a,0,0,a.width,a.height)},i=function(a){a.forEach(function(a){g.beginPath(),g.lineWidth="2",g.strokeStyle="red",g.rect(a.x,a.y,a.width,a.height),g.stroke()})},j=function(a){var b=new Image;b.onload=function(){e=this,c.set(e),k()};var d=new FileReader;d.onload=function(){b.src=d.result},d.readAsDataURL(a)},k=function(){e&&h(e),f&&i(f)};return{pre:function(b,c,e){b.$watch(e.ngModel,function(a){a&&j(a)}),b.$watch(d.regions,function(b){a.isArray(b)&&(f=b,k())},!0)},post:function(){}}}}})}(angular,JSZip);